<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shi Zhang | Computer Science & Design</title>
    <link rel="stylesheet" href="style-new.css" />
  </head>
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-BMHC9VDGPY"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-BMHC9VDGPY");
  </script>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="nav-container">
        <a href="index.html" class="logo">Shi Zhang</a>
        <button
          class="mobile-menu-toggle"
          aria-label="Toggle mobile menu"
          aria-expanded="false"
        >
          ‚ò∞
        </button>
        <ul class="nav-links">
          <li><a href="#about">About</a></li>
          <li><a href="#experience">Experience</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#skills">Skills</a></li>
          <li><a href="biography.html">Biography</a></li>
          <li><a href="resume.html">Resume</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li>
            <button
              class="theme-toggle"
              id="themeToggle"
              aria-label="Toggle theme"
            >
              <span class="theme-toggle-icon">‚òÄÔ∏è</span>
              <span class="theme-toggle-text">Light</span>
            </button>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Hero Section -->
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-mask"></div>
      <div class="hero-content">
        <h1>
          Design meets Computer Science.<br />Innovation through intelligence.
        </h1>
        <p class="subtitle">
          I'm Shi Zhang (Simon), a founding software engineer at IDitor Inc‚Äîa San
          Francisco-based AI social app startup. With a Master's in Computer
          Science from Northeastern University and a background in architectural
          design, I bring a unique perspective to software development‚Äîblending
          creative problem-solving with technical expertise. I'm currently
          expanding my expertise through Northeastern's Master of Science in Data
          Analytics and Engineering program.
        </p>
      </div>

      <!-- Infinity Ring Canvas from original site -->
      <div class="canvas-container">
        <canvas id="donutCanvas" width="400" height="300"></canvas>
      </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
      <div class="about-container">
        <h2>My Journey</h2>
        <div class="about-grid">
          <div class="about-card">
            <h3>From Architecture to Tech</h3>
            <p>
              My journey began with a Bachelor of Architecture from Rensselaer
              Polytechnic Institute and a Master of Science in Design from
              University of Pennsylvania. In 2025, I completed my Master of
              Science in Computer Science at Northeastern University. This
              multidisciplinary foundation in design thinking and technical
              problem-solving now shapes my approach to software architecture
              and innovation.
            </p>
          </div>
          <div class="about-card">
            <h3>Current Focus</h3>
            <p>
              As a founding software engineer at IDitor Inc, a San
              Francisco-based startup, I'm building cutting-edge AI-powered
              social applications that connect people in meaningful ways.
              Currently pursuing my Master of Science in Data Analytics and
              Engineering at Northeastern University, I'm passionate about
              full-stack development, computer vision, AI/ML applications, and
              creating user-centric solutions that bridge complex technology
              with intuitive design.
            </p>
          </div>
          <div class="about-card">
            <h3>Unique Perspective</h3>
            <p>
              My architectural background has honed my abilities in project
              management, creative problem-solving, and systems thinking. As a
              founding engineer, I bring this multidisciplinary approach to
              every technical challenge‚Äîfrom designing scalable architectures to
              crafting elegant user experiences. I believe the best solutions
              emerge at the intersection of design, engineering, and data
              science.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Experience Timeline -->
    <section class="experience" id="experience">
      <div class="experience-container">
        <h2>Professional Experience</h2>
        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">Nov 2025 - Present</div>
              <div class="timeline-title">Founding Software Engineer</div>
              <div class="timeline-company">IDitor Inc, San Francisco CA</div>
              <p>
                Building innovative AI-powered social applications as a founding
                member of a San Francisco-based startup. Leading full-stack
                development, architecting scalable systems, and integrating
                cutting-edge AI/ML technologies to create meaningful user
                connections and enhance engagement.
              </p>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">Sep 2024 - Dec 2024</div>
              <div class="timeline-title">Software Development Intern</div>
              <div class="timeline-company">IDitor Inc, Hillsborough CA</div>
              <p>
                Created user-matching service using TypeScript and Supabase with
                cosine similarity, improving recommendation accuracy by 20%.
                Developed chat-simulation API with OpenAI integration.
              </p>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">May 2024 - Aug 2024</div>
              <div class="timeline-title">Software Development Intern</div>
              <div class="timeline-company">GraphAcademy, Cupertino CA</div>
              <p>
                Developed AI-driven dating app using Next.js and TypeScript,
                achieving 30% improvement in user engagement. Integrated Hume
                voice API and image processing technologies.
              </p>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">Apr 2024 - Jun 2024</div>
              <div class="timeline-title">Backend Development Intern</div>
              <div class="timeline-company">
                Green Light-Year (NPO), Shanghai
              </div>
              <p>
                Built comprehensive ESG data visualization platform with Vue.js
                frontend and Flask/PostgreSQL backend for sustainable community
                practices.
              </p>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">Sep 2023 - Dec 2023</div>
              <div class="timeline-title">Research Assistant</div>
              <div class="timeline-company">
                Northeastern University, Seattle WA
              </div>
              <p>
                Analyzed NoSQL vs Distributed SQL performance in cloud
                environments. Developed NLP-based resume matching system
                boosting recruitment efficiency by 25%.
              </p>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
              <div class="timeline-date">Feb 2020 - Nov 2022</div>
              <div class="timeline-title">Architectural BIM Designer</div>
              <div class="timeline-company">Ballinger, Philadelphia PA</div>
              <p>
                Managed documentation for 1.6 million sq. ft. hospital project.
                Streamlined data workflow between Excel and Revit, collaborating
                with MEP teams.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section class="projects" id="projects">
      <div class="projects-container">
        <h2>Featured Projects</h2>
        <p class="projects-subtitle">
          A selection of work showcasing my full-stack development and computer
          vision expertise
        </p>

        <div class="project-filters">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="web">Web</button>
          <button class="filter-btn" data-filter="mobile">Mobile</button>
          <button class="filter-btn" data-filter="vision">
            Computer Vision
          </button>
          <button class="filter-btn" data-filter="ai">AI/ML</button>
        </div>

        <div class="project-grid">
          <div class="project-card" data-category="web ai">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/rCsq16M.gif"
                alt="FactHub Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Web</span>
                <span class="project-tag">AI</span>
              </div>
              <h3>FactHub</h3>
              <p>
                Full-stack social web application with React frontend and
                Supabase backend. Features voting, categorization, and
                commenting systems for community engagement.
              </p>
              <a
                href="https://factup.netlify.app/"
                target="_blank"
                class="project-link"
                >View project ‚Üí</a
              >
            </div>
          </div>

          <div class="project-card" data-category="web ai">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/DfjM2Mr.gif"
                alt="AI Chat Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Web</span>
                <span class="project-tag">AI</span>
              </div>
              <h3>AI Chat with Document Context</h3>
              <p>
                AI-powered chat application using React, Next.js, and
                Material-UI that processes documents to provide contextual
                responses with local and external AI models.
              </p>
              <a
                href="https://rag-chatbot-lac.vercel.app/"
                target="_blank"
                class="project-link"
                >View project ‚Üí</a
              >
            </div>
          </div>

          <div class="project-card" data-category="vision ai">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/hMdR1NU.gif"
                alt="AR System Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Computer Vision</span>
                <span class="project-tag">AI</span>
              </div>
              <h3>Real-Time AR System</h3>
              <p>
                C++ application with OpenCV for camera calibration and real-time
                3D object projection. Features dynamic AR environment
                interaction and virtual object manipulation.
              </p>
              <a
                href="https://github.com/zhangshi0512/cs5330_project04_calibration-AugmentedReality"
                target="_blank"
                class="project-link"
                >View code ‚Üí</a
              >
            </div>
          </div>

          <div class="project-card" data-category="mobile">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/XmdpSKn.gif"
                alt="StayStocked Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Mobile</span>
                <span class="project-tag">Android</span>
              </div>
              <h3>StayStocked</h3>
              <p>
                Android app built with Kotlin for grocery inventory management.
                Features product listings, search filters, and user
                interactions. Received positive feedback from 140+ users.
              </p>
              <a
                href="https://vimeo.com/822187167"
                target="_blank"
                class="project-link"
                >View demo ‚Üí</a
              >
            </div>
          </div>

          <div class="project-card" data-category="vision ai">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/vt2yI3t.gif"
                alt="Object Classifier Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Computer Vision</span>
                <span class="project-tag">AI</span>
              </div>
              <h3>Real-Time Object Classifier</h3>
              <p>
                Object recognition system using C++ and OpenCV with KNN matching
                and Hausdorff distance-based contour recognition for accurate
                classification.
              </p>
              <a
                href="https://github.com/zhangshi0512/cs5330_project03_realTime2DObjectRecognition"
                target="_blank"
                class="project-link"
                >View code ‚Üí</a
              >
            </div>
          </div>

          <div class="project-card" data-category="web">
            <div class="project-visual">
              <img
                src="https://i.imgur.com/3CFcMBC.gif"
                alt="Creatorverse Preview"
              />
            </div>
            <div class="project-content">
              <div class="project-tags">
                <span class="project-tag">Web</span>
                <span class="project-tag">Full-stack</span>
              </div>
              <h3>Creatorverse</h3>
              <p>
                Content creator management platform with React and Supabase.
                Features CRUD operations with card-based interface and
                responsive design.
              </p>
              <a
                href="https://creatorverse-theta.vercel.app/"
                target="_blank"
                class="project-link"
                >View project ‚Üí</a
              >
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section class="skills" id="skills">
      <div class="skills-container">
        <h2>Technical Skills</h2>
        <div class="skills-grid">
          <div class="skill-category">
            <h3>Languages</h3>
            <div class="skill-tags">
              <span class="skill-tag">Java</span>
              <span class="skill-tag">Python</span>
              <span class="skill-tag">JavaScript</span>
              <span class="skill-tag">TypeScript</span>
              <span class="skill-tag">Kotlin</span>
              <span class="skill-tag">C++</span>
              <span class="skill-tag">SQL</span>
            </div>
          </div>

          <div class="skill-category">
            <h3>Frameworks</h3>
            <div class="skill-tags">
              <span class="skill-tag">React.js</span>
              <span class="skill-tag">Next.js</span>
              <span class="skill-tag">Node.js</span>
              <span class="skill-tag">Vue.js</span>
              <span class="skill-tag">Spring Boot</span>
              <span class="skill-tag">Flask</span>
            </div>
          </div>

          <div class="skill-category">
            <h3>Tools & Platforms</h3>
            <div class="skill-tags">
              <span class="skill-tag">Docker</span>
              <span class="skill-tag">AWS</span>
              <span class="skill-tag">Git</span>
              <span class="skill-tag">Linux</span>
              <span class="skill-tag">OpenCV</span>
              <span class="skill-tag">Supabase</span>
            </div>
          </div>

          <div class="skill-category">
            <h3>Databases</h3>
            <div class="skill-tags">
              <span class="skill-tag">PostgreSQL</span>
              <span class="skill-tag">MySQL</span>
              <span class="skill-tag">MongoDB</span>
              <span class="skill-tag">Supabase</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
      <div class="contact-container">
        <h2>Let's Connect</h2>
        <p>
          I'm always interested in hearing about new opportunities and
          collaborations in software development and innovation.
        </p>

        <div class="contact-grid">
          <a href="mailto:zhangshi0512@gmail.com" class="contact-link">
            <span class="contact-icon">üìß</span>
            <span class="contact-label">Email</span>
          </a>

          <a
            href="https://www.linkedin.com/in/zhangshisimon/"
            target="_blank"
            class="contact-link"
          >
            <span class="contact-icon">üíº</span>
            <span class="contact-label">LinkedIn</span>
          </a>

          <a
            href="https://github.com/zhangshi0512"
            target="_blank"
            class="contact-link"
          >
            <span class="contact-icon">üíª</span>
            <span class="contact-label">GitHub</span>
          </a>

          <a
            href="https://www.behance.net/Simonarch"
            target="_blank"
            class="contact-link"
          >
            <span class="contact-icon">üé®</span>
            <span class="contact-label">Behance</span>
          </a>

          <a
            href="https://ideogram.ai/@simonsterrific/pinned"
            target="_blank"
            class="contact-link"
          >
            <span class="contact-icon">üñºÔ∏è</span>
            <span class="contact-label">Ideogram</span>
          </a>
        </div>

        <div class="cta-buttons">
          <a href="mailto:zhangshi0512@gmail.com" class="btn btn-primary"
            >Get in touch</a
          >
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <div class="footer-container">
        <p class="footer-copyright">
          ¬© 2024 by Shi Zhang. All rights reserved.
        </p>
      </div>
    </footer>

    <!-- Shared Theme Toggle Script -->
    <script src="theme.js"></script>

    <!-- Mobile Menu Script -->
    <script src="mobile-menu.js"></script>

    <script>
      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // Add scroll effect to navigation
      window.addEventListener("scroll", function () {
        const nav = document.querySelector("nav");
        if (window.scrollY > 50) {
          nav.style.boxShadow = "0 2px 10px rgba(0,0,0,0.05)";
        } else {
          nav.style.boxShadow = "none";
        }
      });

      // Infinity Ring Animation & Hero Morphing System
      const canvas = document.getElementById("donutCanvas");
      const ctx = canvas.getContext("2d");
      const heroH1 = document.querySelector(".hero h1");
      const heroSubtitle = document.querySelector(".hero .subtitle");
      const canvasContainer = document.querySelector(".canvas-container");
      
      canvas.width = 400;
      canvas.height = 300;

      // --- Configuration ---
      const CONFIG = {
        initialDelay: 3000,      // Time before first morph (ms)
        shapeDuration: 3000,     // Time to stay on each shape (ms)
        restoreDelay: 1000,      // Time to wait before restoring text after cycle (ms)
        morphSpeed: 0.05,        // Speed of shape interpolation
        scatterSpeed: 0.03,      // Speed of particle scatter/gather
        baseSpeedA: 0.07,
        baseSpeedB: 0.03
      };

      // --- State Management ---
      const STATE = {
        TEXT_VIEW: 0,        // Text visible, Canvas hidden
        TRANSITION_IN: 1,    // Text fading out, Canvas particles gathering
        SHAPE_CYCLE: 2,      // Cycling through 3D shapes
        TRANSITION_OUT: 3    // Canvas particles scattering, Text fading in
      };

      let currentState = STATE.TEXT_VIEW;
      let stateTimer = null;
      
      // --- Animation Variables ---
      let A = 0, B = 0;
      let currentSpeedA = CONFIG.baseSpeedA;
      let currentSpeedB = CONFIG.baseSpeedB;
      let currentScale = 1.0;
      
      // Morphing
      let morphProgress = 0; 
      let targetMorphIndex = 0;
      const numShapes = 3; // Mobius, Sphere, Torus
      
      // Scattering (0 = Formed Shape, 1 = Scattered Cloud)
      let scatterProgress = 1.0; 
      let targetScatter = 1.0;

      const R = 0.85;
      const K2 = 5;
      const K1 = ((canvas.width * K2 * 3) / (8 * R)) * 0.6;

      const shadingChars = ".,-~:;=!*#$@";

      // --- Lifecycle Logic ---

      function startLifecycle() {
        // Start in TEXT_VIEW
        currentState = STATE.TEXT_VIEW;
        targetScatter = 1.0; // Canvas starts scattered/hidden
        scatterProgress = 1.0;
        
        // Wait 3s then morph
        stateTimer = setTimeout(triggerMorphToCanvas, CONFIG.initialDelay);
      }

      function triggerMorphToCanvas() {
        currentState = STATE.TRANSITION_IN;
        
        // Visuals
        heroH1.classList.add("disassemble");
        canvasContainer.classList.add("visible");
        
        // Logic
        targetScatter = 0.0; // Gather particles
        targetMorphIndex = 0; // Start at Mobius
        
        // Wait for gather to finish, then start cycling
        stateTimer = setTimeout(() => {
          currentState = STATE.SHAPE_CYCLE;
          cycleShapes();
        }, 1500);
      }

      function cycleShapes() {
        if (currentState !== STATE.SHAPE_CYCLE) return;

        // Auto-advance shapes
        stateTimer = setTimeout(() => {
          if (currentState !== STATE.SHAPE_CYCLE) return;
          
          targetMorphIndex++;
          
          // Check if we completed a full cycle (3 shapes: 0, 1, 2)
          // We want to show 0 -> 1 -> 2 -> then Restore
          if (targetMorphIndex >= numShapes) {
             // End of cycle, restore text
             triggerMorphToText();
          } else {
             // Next shape
             cycleShapes();
          }
        }, CONFIG.shapeDuration);
      }

      function triggerMorphToText() {
        currentState = STATE.TRANSITION_OUT;
        
        // Logic
        targetScatter = 1.0; // Scatter particles
        
        // Visuals
        // Wait a bit for scatter to start before hiding canvas/showing text
        setTimeout(() => {
            heroH1.classList.remove("disassemble");
            canvasContainer.classList.remove("visible");
        }, 500);

        // Reset State (No Auto-Restart)
        stateTimer = setTimeout(() => {
            // Reset morph index for next time
            targetMorphIndex = 0;
            morphProgress = 0;
            
            // Go back to TEXT_VIEW state so clicks can trigger it again
            currentState = STATE.TEXT_VIEW;
        }, CONFIG.restoreDelay + 1500);
      }

      // --- Interaction ---
      
      // Click on Canvas (or Hero Section?)
      // Let's make the whole hero interactive or just the canvas?
      // User said "If user click on it [motion effect]"
      canvas.addEventListener("click", (e) => {
        e.stopPropagation(); // Prevent bubbling if needed
        handleInteraction();
      });
      
      // Also allow clicking the text to trigger the start early
      heroH1.addEventListener("click", () => {
         if (currentState === STATE.TEXT_VIEW) {
             handleInteraction();
         }
      });

      function handleInteraction() {
        // Clear any pending auto-timers
        clearTimeout(stateTimer);

        if (currentState === STATE.TEXT_VIEW) {
            // Immediate start
            triggerMorphToCanvas();
        } 
        else if (currentState === STATE.TRANSITION_IN) {
            // Rush to shape cycle
            currentState = STATE.SHAPE_CYCLE;
            targetScatter = 0.0;
            scatterProgress = 0.0; // Snap
            cycleShapes();
        }
        else if (currentState === STATE.SHAPE_CYCLE) {
            // Speed up / Next Shape
            // Add "Spin Jump" effect
            currentSpeedA = 0.8;
            currentSpeedB = 0.4;
            currentScale = 1.3;
            
            targetMorphIndex++;
            
            // If we go past the last shape in interactive mode, 
            // do we loop or restore? 
            // "morph to next type... speedup version"
            // Let's loop indefinitely if user is interacting, or restore?
            // "restore back" was for non-user interaction.
            // Let's assume interactive mode keeps it alive or cycles faster.
            // Let's Loop:
            if (targetMorphIndex >= numShapes) {
                targetMorphIndex = 0; // Loop back to start
                // Adjust morphProgress to avoid "rewind" visual artifact
                // We can't easily fix the rewind without modular arithmetic in render
                // For now, let's just let it morph.
            }
            
            // Restart the auto-timer to continue cycling or eventually restore
            // if user stops clicking
            cycleShapes(); 
        }
        else if (currentState === STATE.TRANSITION_OUT) {
            // Bring it back!
            currentState = STATE.TRANSITION_IN;
            triggerMorphToCanvas();
        }
      }

      // --- Render Loop ---

      function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const z = new Array(canvas.width * canvas.height).fill(0);
        const b = new Array(canvas.width * canvas.height).fill(" ");

        // Physics & Transitions
        currentSpeedA = currentSpeedA * 0.95 + CONFIG.baseSpeedA * 0.05;
        currentSpeedB = currentSpeedB * 0.95 + CONFIG.baseSpeedB * 0.05;
        currentScale = currentScale * 0.9 + 1.0 * 0.1;
        
        // Morph Interpolation
        // If looping (interactive), we might need to handle wrap-around, 
        // but for simple 0->1->2, simple lerp is fine.
        // If target < progress (rewind), snap or fast lerp?
        if (targetMorphIndex < morphProgress && Math.abs(targetMorphIndex - morphProgress) > 1.5) {
            // We wrapped around (2 -> 0)
            morphProgress = -0.1; // Snap to before 0
        }
        morphProgress = morphProgress * (1 - CONFIG.morphSpeed) + targetMorphIndex * CONFIG.morphSpeed;
        
        // Scatter Interpolation
        scatterProgress = scatterProgress * (1 - CONFIG.scatterSpeed) + targetScatter * CONFIG.scatterSpeed;

        A += currentSpeedA;
        B += currentSpeedB;

        const cosA = Math.cos(A), sinA = Math.sin(A);
        const cosB = Math.cos(B), sinB = Math.sin(B);

        // Apply scale
        const effectiveK1 = K1 * currentScale;
        
        // Determine shape blending
        // We clamp indices to handle the transition logic safely
        let idx1 = Math.floor(morphProgress);
        let idx2 = idx1 + 1;
        let t = morphProgress - idx1;
        
        // Clamp for safety
        if (idx1 < 0) idx1 = 0;
        
        // Helper for shapes
        function getShapeCoords(typeIdx, u, v) {
            // Modulo to handle wrapping
            const type = ((typeIdx % numShapes) + numShapes) % numShapes;
            let x, y, z;
            
            if (type === 0) { // Mobius
                x = (R + v * Math.cos(u / 2)) * Math.cos(u);
                y = (R + v * Math.cos(u / 2)) * Math.sin(u);
                z = v * Math.sin(u / 2);
            } else if (type === 1) { // Sphere
                const lat = v * Math.PI;
                x = R * Math.cos(lat) * Math.cos(u);
                y = R * Math.cos(lat) * Math.sin(u);
                z = R * Math.sin(lat);
            } else { // Torus
                const tubeRadius = 0.35;
                const tubeAngle = v * 2 * Math.PI;
                x = (R + tubeRadius * Math.cos(tubeAngle)) * Math.cos(u);
                y = (R + tubeRadius * Math.cos(tubeAngle)) * Math.sin(u);
                z = tubeRadius * Math.sin(tubeAngle);
            }
            return {x, y, z};
        }

        for (let u = 0; u < 6.28; u += 0.1) {
          for (let v = -0.5; v <= 0.5; v += 0.1) {
            
            // 1. Get Formed Shape Position
            const p1 = getShapeCoords(idx1, u, v);
            const p2 = getShapeCoords(idx2, u, v);
            
            let x = p1.x * (1 - t) + p2.x * t;
            let y = p1.y * (1 - t) + p2.y * t;
            let z0 = p1.z * (1 - t) + p2.z * t;
            
            // 2. Apply Scatter Effect
            // Scatter source: Let's say particles come from the Left (-2.0, 0, 0)
            // creating a "wind" or "assembly" effect
            if (scatterProgress > 0.01) {
                const scatterX = -3.0 + Math.random() * 2.0; // Left side cloud
                const scatterY = (Math.random() - 0.5) * 4.0;
                const scatterZ = (Math.random() - 0.5) * 4.0;
                
                // Noise factor based on u,v to make it deterministic but chaotic
                const noise = Math.sin(u * 10 + v * 20);
                
                x = x * (1 - scatterProgress) + (scatterX + noise) * scatterProgress;
                y = y * (1 - scatterProgress) + (scatterY + noise) * scatterProgress;
                z0 = z0 * (1 - scatterProgress) + (scatterZ + noise) * scatterProgress;
            }

            // 3. Projection
            const D = 1 / (z0 * sinA + y * cosA + K2);
            const t1 = z0 * cosA - y * sinA;

            const x1 = Math.floor(
              canvas.width / 2 + effectiveK1 * D * (x * cosB - t1 * sinB)
            );
            const y1 = Math.floor(
              canvas.height / 2 + effectiveK1 * D * (x * sinB + t1 * cosB)
            );
            const o = x1 + canvas.width * y1;
            const L = Math.floor(
              8 *
                ((y * sinA - z0 * cosA) * cosB -
                  z0 * sinA -
                  y * cosA -
                  x * cosB)
            );

            if (
              canvas.width > x1 &&
              x1 > 0 &&
              y1 > 0 &&
              canvas.height > y1 &&
              D > z[o]
            ) {
              z[o] = D;
              b[o] = shadingChars[Math.max(L, 0)];
            }
          }
        }

        const fillColor = getComputedStyle(document.body)
          .getPropertyValue("--canvas-fill")
          .trim();
        ctx.fillStyle = fillColor;
        ctx.font = "10px monospace";

        for (let k = 0; k < canvas.width * canvas.height; k++) {
          if (z[k] > 0) {
            const x = k % canvas.width;
            const y = Math.floor(k / canvas.width);
            ctx.fillText(b[k], x, y);
          }
        }
      }

      setInterval(render, 80);
      
      // Initialize
      startLifecycle();
    </script>

    <!-- Shared Project Filter Script -->
    <script src="project-filter.js"></script>
  </body>
</html>
